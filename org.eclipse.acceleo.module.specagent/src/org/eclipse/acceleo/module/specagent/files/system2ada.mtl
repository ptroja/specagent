[comment encoding = UTF-8 /]
[module system2ada('http://multirobotsystem/1.0')/]
[import agent_spec/]
[import agent_body/]
[import agent_buffers/]
[import logic_spec/]
[import project/]
[import task_termination_monitor/]
[import makefile_nxt/]

[template public system2ada(aSystem : System)]

[comment @main /]
[file ('system_'+aSystem.name+'.adb', false, 'UTF-8')]
-- with Ada.Text_IO;
[for (anAgent : Agent | agents)]
with Agent_[anAgent.name/];
[/for]

with Start_Up;
pragma Elaborate(Start_Up);

procedure System_[aSystem.name/] is
begin
   null;
end System_[aSystem.name/];
[/file]

[for (anAgent : Agent | aSystem.agents)]
[project(aSystem)/]
[makefile_nxt(aSystem)/]

[task_termination_monitor()/]

[agent_spec(anAgent)/]
[agent_body(anAgent)/]
[agent_buffers(anAgent)/]
[logic_spec(anAgent)/]
[/for]
	
[/template]